From 44bb7236323fbbd7949ff4bdbee21568053ac882 Mon Sep 17 00:00:00 2001
From: handsomeyingyan <handsomeyingyan@github.com>
Date: Sat, 3 Oct 2020 12:08:09 +0800
Subject: [PATCH] add nand support

---
 configs/widora_tiny200_v2_nand_defconfig | 63 ++++++++++++++++++++++
 configs/widora_tiny200_v3_nand_defconfig | 66 ++++++++++++++++++++++++
 2 files changed, 129 insertions(+)
 create mode 100644 configs/widora_tiny200_v2_nand_defconfig
 create mode 100644 configs/widora_tiny200_v3_nand_defconfig

diff --git a/configs/widora_tiny200_v2_nand_defconfig b/configs/widora_tiny200_v2_nand_defconfig
new file mode 100644
index 00000000..1181d749
--- /dev/null
+++ b/configs/widora_tiny200_v2_nand_defconfig
@@ -0,0 +1,63 @@
+CONFIG_ARM=y
+CONFIG_ARCH_SUNXI=y
+CONFIG_MACH_SUNIV=y
+CONFIG_DEFAULT_DEVICE_TREE="suniv-f1c100s-tiny200-v2"
+
+CONFIG_SYS_CLK_FREQ=408000000
+CONFIG_DRAM_CLK=168
+CONFIG_DRAM_ZQ=0
+
+CONFIG_CONS_INDEX=2
+
+CONFIG_SPL=y
+CONFIG_SPL_SPI_SUNXI=y
+CONFIG_MMC_SUNXI_SLOT_EXTRA=1
+
+CONFIG_SYS_TEXT_BASE=0x81700000
+CONFIG_VIDEO_LCD_MODE="x:800,y:480,depth:18,pclk_khz:30000,le:16,ri:209,up:22,lo:22,hs:30,vs:1,sync:0,vmode:0"
+CONFIG_VIDEO_LCD_BL_PWM="PE12"
+CONFIG_VIDEO_LCD_BL_PWM_ACTIVE_LOW=n
+
+CONFIG_NET=n
+
+CONFIG_SPI=y
+CONFIG_DM_SPI=y
+CONFIG_SPI_SUNXI=y
+
+CONFIG_MTD=y
+CONFIG_DM_MTD=y
+CONFIG_CMD_MTD=y
+CONFIG_MTD_SPI_NAND=y
+
+CONFIG_SPI_FLASH=y
+CONFIG_DM_SPI_FLASH=y
+CONFIG_SPI_FLASH_BAR=y
+CONFIG_SPI_FLASH_WINBOND=y
+
+CONFIG_PHY=y
+CONFIG_PHY_SUN4I_USB=y
+
+CONFIG_USB_MUSB_SUNXI=y
+CONFIG_USB_MUSB_GADGET=y
+CONFIG_USB_MUSB_PIO_ONLY=y
+CONFIG_USB_MUSB_DISABLE_BULK_COMBINE_SPLIT=y
+CONFIG_USB_GADGET_VBUS_DRAW=250
+
+CONFIG_USB_STORAGE=y
+CONFIG_CMD_USB_MASS_STORAGE=y
+
+CONFIG_CMD_FASTBOOT=n
+CONFIG_FASTBOOT=n
+CONFIG_USB_FUNCTION_FASTBOOT=n
+
+CONFIG_CMD_MTDPARTS=y
+
+CONFIG_USB_GADGET_DOWNLOAD=y
+
+CONFIG_CMD_DFU=y
+CONFIG_DFU=y
+CONFIG_DFU_OVER_USB=y
+CONFIG_DFU_TIMEOUT=y
+CONFIG_DFU_MMC=y
+CONFIG_DFU_SF=y
+CONFIG_DFU_MTD=y
diff --git a/configs/widora_tiny200_v3_nand_defconfig b/configs/widora_tiny200_v3_nand_defconfig
new file mode 100644
index 00000000..7d0b6cdd
--- /dev/null
+++ b/configs/widora_tiny200_v3_nand_defconfig
@@ -0,0 +1,66 @@
+CONFIG_ARM=y
+CONFIG_ARCH_SUNXI=y
+CONFIG_MACH_SUNIV=y
+CONFIG_DEFAULT_DEVICE_TREE="suniv-f1c100s-tiny200-v3"
+
+CONFIG_SYS_CLK_FREQ=408000000
+CONFIG_DRAM_CLK=168
+CONFIG_DRAM_ZQ=0
+
+CONFIG_CONS_INDEX=2
+
+CONFIG_SPL=y
+CONFIG_SPL_SPI_SUNXI=y
+CONFIG_MMC_SUNXI_SLOT_EXTRA=1
+
+CONFIG_SYS_TEXT_BASE=0x81700000
+
+CONFIG_BOOTDELAY=0
+
+CONFIG_VIDEO_LCD_MODE="x:800,y:480,depth:18,pclk_khz:30000,le:16,ri:209,up:22,lo:22,hs:30,vs:1,sync:0,vmode:0"
+CONFIG_VIDEO_LCD_BL_PWM="PE6"
+CONFIG_VIDEO_LCD_BL_PWM_ACTIVE_LOW=n
+
+CONFIG_NET=n
+
+CONFIG_SPI=y
+CONFIG_DM_SPI=y
+CONFIG_SPI_SUNXI=y
+
+CONFIG_MTD=y
+CONFIG_DM_MTD=y
+CONFIG_CMD_MTD=y
+CONFIG_MTD_SPI_NAND=y
+
+CONFIG_SPI_FLASH=y
+CONFIG_DM_SPI_FLASH=y
+CONFIG_SPI_FLASH_BAR=y
+CONFIG_SPI_FLASH_WINBOND=y
+
+CONFIG_PHY=y
+CONFIG_PHY_SUN4I_USB=y
+
+CONFIG_USB_MUSB_SUNXI=y
+CONFIG_USB_MUSB_GADGET=y
+CONFIG_USB_MUSB_PIO_ONLY=y
+CONFIG_USB_MUSB_DISABLE_BULK_COMBINE_SPLIT=y
+CONFIG_USB_GADGET_VBUS_DRAW=250
+
+CONFIG_USB_STORAGE=y
+CONFIG_CMD_USB_MASS_STORAGE=y
+
+CONFIG_CMD_FASTBOOT=n
+CONFIG_FASTBOOT=n
+CONFIG_USB_FUNCTION_FASTBOOT=n
+
+CONFIG_CMD_MTDPARTS=y
+
+CONFIG_USB_GADGET_DOWNLOAD=y
+
+CONFIG_CMD_DFU=y
+CONFIG_DFU=y
+CONFIG_DFU_OVER_USB=y
+CONFIG_DFU_TIMEOUT=y
+CONFIG_DFU_MMC=y
+CONFIG_DFU_SF=y
+CONFIG_DFU_MTD=y
-- 
2.28.0

